/*
 * File:        TableTools.js
 * Version:     2.0.2
 * Description: Tools and buttons for DataTables
 * Author:      Allan Jardine (www.sprymedia.co.uk)
 * Language:    Javascript
 * License:	    GPL v2 or BSD 3 point style
 * Project:	    DataTables
 * 
 * Copyright 2009-2012 Allan Jardine, all rights reserved.
 *
 * This source file is free software, under either the GPL v2 license or a
 * BSD style license, available at:
 *   http://datatables.net/license_gpl2
 *   http://datatables.net/license_bsd
 *//* Global scope for TableTools */var TableTools;(function(e,t,n){TableTools=function(e,t){(!this.CLASS||this.CLASS!="TableTools")&&alert("Warning: TableTools must be initialised with the keyword 'new'");this.s={that:this,dt:null,print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:!1,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:!1};this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,background:null}};this.fnSettings=function(){return this.s};typeof t=="undefined"&&(t={});this.s.dt=e.fnSettings();this._fnConstruct(t);return this};TableTools.prototype={fnGetSelected:function(){var e=this._fnGetMasterSettings();return e.select.selected},fnGetSelectedData:function(){var e=this._fnGetMasterSettings(),t=e.select.selected,n=[];for(var r=0,i=t.length;r<i;r++)n.push(this.s.dt.oInstance.fnGetData(t[r]));return n},fnIsSelected:function(e){var t=this.fnGetSelected();for(var n=0,r=t.length;n<r;n++)if(e==t[n])return!0;return!1},fnSelectAll:function(){var e=this._fnGetMasterSettings();e.that._fnRowSelectAll()},fnSelectNone:function(){var e=this._fnGetMasterSettings();e.that._fnRowDeselectAll()},fnSelect:function(e){this.fnIsSelected(e)||(this.s.select.type=="single"?this._fnRowSelectSingle(e):this.s.select.type=="multi"&&this._fnRowSelectMulti(e))},fnDeselect:function(e){this.fnIsSelected(e)&&(this.s.select.type=="single"?this._fnRowSelectSingle(e):this.s.select.type=="multi"&&this._fnRowSelectMulti(e))},fnGetTitle:function(e){var t="";if(typeof e.sTitle!="undefined"&&e.sTitle!=="")t=e.sTitle;else{var r=n.getElementsByTagName("title");r.length>0&&(t=r[0].innerHTML)}return"ยก".toString().length<4?t.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""):t.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")},fnCalcColRatios:function(e){var t=this.s.dt.aoColumns,n=this._fnColumnTargets(e.mColumns),r=[],i=0,s=0,o,u;for(o=0,u=n.length;o<u;o++)if(n[o]){i=t[o].nTh.offsetWidth;s+=i;r.push(i)}for(o=0,u=r.length;o<u;o++)r[o]=r[o]/s;return r.join("	")},fnGetTableData:function(e){if(this.s.dt)return this._fnGetDataTablesData(e)},fnSetText:function(e,t){this._fnFlashSetText(e,t)},fnResizeButtons:function(){for(var e in ZeroClipboard.clients)if(e){var t=ZeroClipboard.clients[e];typeof t.domElement!="undefined"&&t.domElement.parentNode==this.dom.container&&t.positionElement()}},fnResizeRequired:function(){for(var e in ZeroClipboard.clients)if(e){var t=ZeroClipboard.clients[e];if(typeof t.domElement!="undefined"&&t.domElement.parentNode==this.dom.container&&t.sized===!1)return!0}return!1},_fnConstruct:function(e){var t=this;this._fnCustomiseSettings(e);this.dom.container=n.createElement("div");this.dom.container.className=this.s.dt.bJUI?"DTTT_container ui-buttonset ui-buttonset-multi":"DTTT_container";this.s.select.type!="none"&&this._fnRowSelectConfig();this._fnButtonDefinations(this.s.buttonSet,this.dom.container);this.s.dt.aoDestroyCallback.push({sName:"TableTools",fn:function(){t.dom.container.innerHTML=""}})},_fnCustomiseSettings:function(t){if(typeof this.s.dt._TableToolsInit=="undefined"){this.s.master=!0;this.s.dt._TableToolsInit=!0}this.dom.table=this.s.dt.nTable;this.s.custom=e.extend({},TableTools.DEFAULTS,t);this.s.swfPath=this.s.custom.sSwfPath;typeof ZeroClipboard!="undefined"&&(ZeroClipboard.moviePath=this.s.swfPath);this.s.select.type=this.s.custom.sRowSelect;this.s.select.preRowSelect=this.s.custom.fnPreRowSelect;this.s.select.postSelected=this.s.custom.fnRowSelected;this.s.select.postDeselected=this.s.custom.fnRowDeselected;this.s.select.selectedClass=this.s.custom.sSelectedClass;this.s.buttonSet=this.s.custom.aButtons},_fnButtonDefinations:function(t,n){var r;for(var i=0,s=t.length;i<s;i++){if(typeof t[i]=="string"){if(typeof TableTools.BUTTONS[t[i]]=="undefined"){alert("TableTools: Warning - unknown button type: "+t[i]);continue}r=e.extend({},TableTools.BUTTONS[t[i]],!0)}else{if(typeof TableTools.BUTTONS[t[i].sExtends]=="undefined"){alert("TableTools: Warning - unknown button type: "+t[i].sExtends);continue}var o=e.extend({},TableTools.BUTTONS[t[i].sExtends],!0);r=e.extend(o,t[i],!0)}if(this.s.dt.bJUI){r.sButtonClass+=" ui-button ui-state-default";r.sButtonClassHover+=" ui-state-hover"}n.appendChild(this._fnCreateButton(r))}},_fnCreateButton:function(e){var t=e.sAction=="div"?this._fnDivBase(e):this._fnButtonBase(e);if(e.sAction=="print")this._fnPrintConfig(t,e);else if(e.sAction.match(/flash/))this._fnFlashConfig(t,e);else if(e.sAction=="text")this._fnTextConfig(t,e);else if(e.sAction=="div")this._fnTextConfig(t,e);else if(e.sAction=="collection"){this._fnTextConfig(t,e);this._fnCollectionConfig(t,e)}return t},_fnButtonBase:function(e){var t=n.createElement("button"),r=n.createElement("span"),i=this._fnGetMasterSettings();t.className="DTTT_button "+e.sButtonClass;t.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+i.buttonCounter);t.appendChild(r);r.innerHTML=e.sButtonText;i.buttonCounter++;return t},_fnDivBase:function(e){var t=n.createElement("div"),r=this._fnGetMasterSettings();t.className=e.sButtonClass;t.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+r.buttonCounter);t.innerHTML=e.sButtonText;e.nContent!==null&&t.appendChild(e.nContent);r.buttonCounter++;return t},_fnGetMasterSettings:function(){if(this.s.master)return this.s;var e=TableTools._aInstances;for(var t=0,n=e.length;t<n;t++)if(this.dom.table==e[t].s.dt.nTable)return e[t].s},_fnCollectionConfig:function(e,t){var r=n.createElement("div");r.style.display="none";r.className=this.s.dt.bJUI?"DTTT_collection ui-buttonset ui-buttonset-multi":"DTTT_collection";t._collection=r;this._fnButtonDefinations(t.aButtons,r)},_fnCollectionShow:function(r,i){var s=this,o=e(r).offset(),u=i._collection,a=o.left,f=o.top+e(r).outerHeight(),l=e(t).height(),c=e(n).height(),h=e(t).width(),p=e(n).width();u.style.position="absolute";u.style.left=a+"px";u.style.top=f+"px";u.style.display="block";e(u).css("opacity",0);var d=n.createElement("div");d.style.position="absolute";d.style.left="0px";d.style.top="0px";d.style.height=(l>c?l:c)+"px";d.style.width=(h>p?h:p)+"px";d.className="DTTT_collection_background";e(d).css("opacity",0);n.body.appendChild(d);n.body.appendChild(u);var v=e(u).outerWidth(),m=e(u).outerHeight();a+v>p&&(u.style.left=p-v+"px");f+m>c&&(u.style.top=f-m-e(r).outerHeight()+"px");this.dom.collection.collection=u;this.dom.collection.background=d;setTimeout(function(){e(u).animate({opacity:1},500);e(d).animate({opacity:.25},500)},10);e(d).click(function(){s._fnCollectionHide.call(s,null,null)})},_fnCollectionHide:function(t,n){if(n!==null&&n.sExtends=="collection")return;if(this.dom.collection.collection!==null){e(this.dom.collection.collection).animate({opacity:0},500,function(e){this.style.display="none"});e(this.dom.collection.background).animate({opacity:0},500,function(e){this.parentNode.removeChild(this)});this.dom.collection.collection=null;this.dom.collection.background=null}},_fnRowSelectConfig:function(){if(this.s.master){var t=this,n,r,i=this.s.dt.aoOpenRows;e(t.s.dt.nTable).addClass("DTTT_selectable");e("tr",t.s.dt.nTBody).live("click",function(n){if(this.parentNode!=t.s.dt.nTBody)return;var r=t.s.dt.oInstance.fnGetNodes();if(e.inArray(this,r)===-1)return;if(t.s.select.preRowSelect!==null&&!t.s.select.preRowSelect.call(t,n))return;t.s.select.type=="single"?t._fnRowSelectSingle.call(t,this):t._fnRowSelectMulti.call(t,this)});t.s.dt.aoDrawCallback.push({fn:function(){t.s.select.all&&t.s.dt.oFeatures.bServerSide&&t.fnSelectAll()},sName:"TableTools_select"})}},_fnRowSelectSingle:function(t){if(this.s.master){if(e("td",t).hasClass(this.s.dt.oClasses.sRowEmpty))return;if(e(t).hasClass(this.s.select.selectedClass))this._fnRowDeselect(t);else{this.s.select.selected.length!==0&&this._fnRowDeselectAll();this.s.select.selected.push(t);e(t).addClass(this.s.select.selectedClass);this.s.select.postSelected!==null&&this.s.select.postSelected.call(this,t)}TableTools._fnEventDispatch(this,"select",t)}},_fnRowSelectMulti:function(t){if(this.s.master){if(e("td",t).hasClass(this.s.dt.oClasses.sRowEmpty))return;if(e(t).hasClass(this.s.select.selectedClass))this._fnRowDeselect(t);else{this.s.select.selected.push(t);e(t).addClass(this.s.select.selectedClass);this.s.select.postSelected!==null&&this.s.select.postSelected.call(this,t)}TableTools._fnEventDispatch(this,"select",t)}},_fnRowSelectAll:function(){if(this.s.master){var t;for(var n=0,r=this.s.dt.aiDisplayMaster.length;n<r;n++){t=this.s.dt.aoData[this.s.dt.aiDisplayMaster[n]].nTr;if(!e(t).hasClass(this.s.select.selectedClass)){this.s.select.selected.push(t);e(t).addClass(this.s.select.selectedClass)}}this.s.select.postSelected!==null&&this.s.select.postSelected.call(this,null);this.s.select.all=!0;TableTools._fnEventDispatch(this,"select",null)}},_fnRowDeselectAll:function(){if(this.s.master){for(var e=this.s.select.selected.length-1;e>=0;e--)this._fnRowDeselect(e,!1);this.s.select.postDeselected!==null&&this.s.select.postDeselected.call(this,null);this.s.select.all=!1;TableTools._fnEventDispatch(this,"select",null)}},_fnRowDeselect:function(t,n){typeof t.nodeName!="undefined"&&(t=e.inArray(t,this.s.select.selected));var r=this.s.select.selected[t];e(r).removeClass(this.s.select.selectedClass);this.s.select.selected.splice(t,1);(typeof n=="undefined"||n)&&this.s.select.postDeselected!==null&&this.s.select.postDeselected.call(this,r);this.s.select.all=!1},_fnTextConfig:function(t,n){var r=this;n.fnInit!==null&&n.fnInit.call(this,t,n);n.sToolTip!==""&&(t.title=n.sToolTip);e(t).hover(function(){e(t).addClass(n.sButtonClassHover);n.fnMouseover!==null&&n.fnMouseover.call(this,t,n,null)},function(){e(t).removeClass(n.sButtonClassHover);n.fnMouseout!==null&&n.fnMouseout.call(this,t,n,null)});n.fnSelect!==null&&TableTools._fnEventListen(this,"select",function(e){n.fnSelect.call(r,t,n,e)});e(t).click(function(e){e.preventDefault();n.fnClick!==null&&n.fnClick.call(r,t,n,null);n.fnComplete!==null&&n.fnComplete.call(r,t,n,null,null);r._fnCollectionHide(t,n)})},_fnFlashConfig:function(t,n){var r=this,i=new ZeroClipboard.Client;n.fnInit!==null&&n.fnInit.call(this,t,n);i.setHandCursor(!0);if(n.sAction=="flash_save"){i.setAction("save");i.setCharSet(n.sCharSet=="utf16le"?"UTF16LE":"UTF8");i.setBomInc(n.bBomInc);i.setFileName(n.sFileName.replace("*",this.fnGetTitle(n)))}else if(n.sAction=="flash_pdf"){i.setAction("pdf");i.setFileName(n.sFileName.replace("*",this.fnGetTitle(n)))}else i.setAction("copy");i.addEventListener("mouseOver",function(s){e(t).addClass(n.sButtonClassHover);n.fnMouseover!==null&&n.fnMouseover.call(r,t,n,i)});i.addEventListener("mouseOut",function(s){e(t).removeClass(n.sButtonClassHover);n.fnMouseout!==null&&n.fnMouseout.call(r,t,n,i)});i.addEventListener("mouseDown",function(e){n.fnClick!==null&&n.fnClick.call(r,t,n,i)});i.addEventListener("complete",function(e,s){n.fnComplete!==null&&n.fnComplete.call(r,t,n,i,s);r._fnCollectionHide(t,n)});this._fnFlashGlue(i,t,n.sToolTip)},_fnFlashGlue:function(e,t,r){var i=this,s=t.getAttribute("id");if(n.getElementById(s)){e.glue(t,r);if(e.domElement.parentNode!=e.div.parentNode&&typeof i.__bZCWarning=="undefined"){i.s.dt.oApi._fnLog(this.s.dt,0,"It looks like you are using the version of ZeroClipboard which came with TableTools 1. Please update to use the version that came with TableTools 2.");i.__bZCWarning=!0}}else setTimeout(function(){i._fnFlashGlue(e,t,r)},100)},_fnFlashSetText:function(e,t){var n=this._fnChunkData(t,8192);e.clearText();for(var r=0,i=n.length;r<i;r++)e.appendText(n[r])},_fnColumnTargets:function(e){var t=[],n=this.s.dt;if(typeof e=="object"){for(i=0,iLen=n.aoColumns.length;i<iLen;i++)t.push(!1);for(i=0,iLen=e.length;i<iLen;i++)t[e[i]]=!0}else if(e=="visible")for(i=0,iLen=n.aoColumns.length;i<iLen;i++)t.push(n.aoColumns[i].bVisible?!0:!1);else if(e=="hidden")for(i=0,iLen=n.aoColumns.length;i<iLen;i++)t.push(n.aoColumns[i].bVisible?!1:!0);else if(e=="sortable")for(i=0,iLen=n.aoColumns.length;i<iLen;i++)t.push(n.aoColumns[i].bSortable?!0:!1);else for(i=0,iLen=n.aoColumns.length;i<iLen;i++)t.push(!0);return t},_fnNewline:function(e){return e.sNewLine=="auto"?navigator.userAgent.match(/Windows/)?"\r\n":"\n":e.sNewLine},_fnGetDataTablesData:function(t){var n,r,i,s,o="",u="",a=this.s.dt,f=new RegExp(t.sFieldBoundary,"g"),l=this._fnColumnTargets(t.mColumns),c=this._fnNewline(t),h=typeof t.bSelectedOnly!="undefined"?t.bSelectedOnly:!1;if(t.bHeader){for(n=0,r=a.aoColumns.length;n<r;n++)if(l[n]){u=a.aoColumns[n].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"");u=this._fnHtmlDecode(u);o+=this._fnBoundData(u,t.sFieldBoundary,f)+t.sFieldSeperator}o=o.slice(0,t.sFieldSeperator.length*-1);o+=c}for(i=0,s=a.aiDisplay.length;i<s;i++)if(this.s.select.type=="none"||h&&e(a.aoData[a.aiDisplay[i]].nTr).hasClass(this.s.select.selectedClass)||h&&this.s.select.selected.length==0){for(n=0,r=a.aoColumns.length;n<r;n++)if(l[n]){var p=a.oApi._fnGetCellData(a,a.aiDisplay[i],n,"display");if(t.fnCellRender)u=t.fnCellRender(p,n)+"";else if(typeof p=="string"){u=p.replace(/\n/g," ");u=u.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,"$1$2$3");u=u.replace(/<.*?>/g,"")}else u=p+"";u=u.replace(/^\s+/,"").replace(/\s+$/,"");u=this._fnHtmlDecode(u);o+=this._fnBoundData(u,t.sFieldBoundary,f)+t.sFieldSeperator}o=o.slice(0,t.sFieldSeperator.length*-1);o+=c}o.slice(0,-1);if(t.bFooter){for(n=0,r=a.aoColumns.length;n<r;n++)if(l[n]&&a.aoColumns[n].nTf!==null){u=a.aoColumns[n].nTf.innerHTML.replace(/\n/g," ").replace(/<.*?>/g,"");u=this._fnHtmlDecode(u);o+=this._fnBoundData(u,t.sFieldBoundary,f)+t.sFieldSeperator}o=o.slice(0,t.sFieldSeperator.length*-1)}_sLastData=o;return o},_fnBoundData:function(e,t,n){return t===""?e:t+e.replace(n,t+t)+t},_fnChunkData:function(e,t){var n=[],r=e.length;for(var i=0;i<r;i+=t)i+t<r?n.push(e.substring(i,i+t)):n.push(e.substring(i,r));return n},_fnHtmlDecode:function(e){if(e.indexOf("&")==-1)return e;var t=this._fnChunkData(e,2048),r=n.createElement("div"),i,s,o,u="",a;for(i=0,s=t.length;i<s;i++){o=t[i].lastIndexOf("&");if(o!=-1&&t[i].length>=8&&o>t[i].length-8){a=t[i].substr(o);t[i]=t[i].substr(0,o)}r.innerHTML=t[i];u+=r.childNodes[0].nodeValue}return u},_fnPrintConfig:function(t,n){var r=this;n.fnInit!==null&&n.fnInit.call(this,t,n);n.sToolTip!==""&&(t.title=n.sToolTip);e(t).hover(function(){e(t).addClass(n.sButtonClassHover)},function(){e(t).removeClass(n.sButtonClassHover)});n.fnSelect!==null&&TableTools._fnEventListen(this,"select",function(e){n.fnSelect.call(r,t,n,e)});e(t).click(function(e){e.preventDefault();r._fnPrintStart.call(r,e,n);n.fnClick!==null&&n.fnClick.call(r,t,n,null);n.fnComplete!==null&&n.fnComplete.call(r,t,n,null,null);r._fnCollectionHide(t,n)})},_fnPrintStart:function(r,i){var s=this,o=this.s.dt;this._fnPrintHideNodes(o.nTable);this.s.print.saveStart=o._iDisplayStart;this.s.print.saveLength=o._iDisplayLength;if(i.bShowAll){o._iDisplayStart=0;o._iDisplayLength=-1;o.oApi._fnCalculateEnd(o);o.oApi._fnDraw(o)}(o.oScroll.sX!==""||o.oScroll.sY!=="")&&this._fnPrintScrollStart(o);var u=o.aanFeatures;for(var a in u)if(a!="i"&&a!="t"&&a.length==1)for(var f=0,l=u[a].length;f<l;f++){this.dom.print.hidden.push({node:u[a][f],display:"block"});u[a][f].style.display="none"}e(n.body).addClass("DTTT_Print");if(i.sInfo!==""){var c=n.createElement("div");c.className="DTTT_print_info";c.innerHTML=i.sInfo;n.body.appendChild(c);setTimeout(function(){e(c).fadeOut("normal",function(){n.body.removeChild(c)})},2e3)}if(i.sMessage!==""){this.dom.print.message=n.createElement("div");this.dom.print.message.className="DTTT_PrintMessage";this.dom.print.message.innerHTML=i.sMessage;n.body.insertBefore(this.dom.print.message,n.body.childNodes[0])}this.s.print.saveScroll=e(t).scrollTop();t.scrollTo(0,0);this.s.print.funcEnd=function(e){s._fnPrintEnd.call(s,e)};e(n).bind("keydown",null,this.s.print.funcEnd)},_fnPrintEnd:function(r){if(r.keyCode==27){r.preventDefault();var i=this,s=this.s.dt,o=this.s.print,u=this.dom.print;this._fnPrintShowNodes();(s.oScroll.sX!==""||s.oScroll.sY!=="")&&this._fnPrintScrollEnd();t.scrollTo(0,o.saveScroll);if(u.message!==null){n.body.removeChild(u.message);u.message=null}e(n.body).removeClass("DTTT_Print");s._iDisplayStart=o.saveStart;s._iDisplayLength=o.saveLength;s.oApi._fnCalculateEnd(s);s.oApi._fnDraw(s);e(n).unbind("keydown",this.s.print.funcEnd);this.s.print.funcEnd=null}},_fnPrintScrollStart:function(){var t=this.s.dt,n=t.nScrollHead.getElementsByTagName("div")[0],r=n.getElementsByTagName("table")[0],i=t.nTable.parentNode,s=t.nTable.getElementsByTagName("thead");s.length>0&&t.nTable.removeChild(s[0]);if(t.nTFoot!==null){var o=t.nTable.getElementsByTagName("tfoot");o.length>0&&t.nTable.removeChild(o[0])}s=t.nTHead.cloneNode(!0);t.nTable.insertBefore(s,t.nTable.childNodes[0]);if(t.nTFoot!==null){o=t.nTFoot.cloneNode(!0);t.nTable.insertBefore(o,t.nTable.childNodes[1])}if(t.oScroll.sX!==""){t.nTable.style.width=e(t.nTable).outerWidth()+"px";i.style.width=e(t.nTable).outerWidth()+"px";i.style.overflow="visible"}if(t.oScroll.sY!==""){i.style.height=e(t.nTable).outerHeight()+"px";i.style.overflow="visible"}},_fnPrintScrollEnd:function(){var e=this.s.dt,t=e.nTable.parentNode;if(e.oScroll.sX!==""){t.style.width=e.oApi._fnStringToCss(e.oScroll.sX);t.style.overflow="auto"}if(e.oScroll.sY!==""){t.style.height=e.oApi._fnStringToCss(e.oScroll.sY);t.style.overflow="auto"}},_fnPrintShowNodes:function(){var e=this.dom.print.hidden;for(var t=0,n=e.length;t<n;t++)e[t].node.style.display=e[t].display;e.splice(0,e.length)},_fnPrintHideNodes:function(t){var n=this.dom.print.hidden,r=t.parentNode,i=r.childNodes;for(var s=0,o=i.length;s<o;s++)if(i[s]!=t&&i[s].nodeType==1){var u=e(i[s]).css("display");if(u!="none"){n.push({node:i[s],display:u});i[s].style.display="none"}}r.nodeName!="BODY"&&this._fnPrintHideNodes(r)}};TableTools._aInstances=[];TableTools._aListeners=[];TableTools.fnGetMasters=function(){var e=[];for(var t=0,n=TableTools._aInstances.length;t<n;t++)TableTools._aInstances[t].s.master&&e.push(TableTools._aInstances[t]);return e};TableTools.fnGetInstance=function(e){typeof e!="object"&&(e=n.getElementById(e));for(var t=0,r=TableTools._aInstances.length;t<r;t++)if(TableTools._aInstances[t].s.master&&TableTools._aInstances[t].dom.table==e)return TableTools._aInstances[t];return null};TableTools._fnEventListen=function(e,t,n){TableTools._aListeners.push({that:e,type:t,fn:n})};TableTools._fnEventDispatch=function(e,t,n){var r=TableTools._aListeners;for(var i=0,s=r.length;i<s;i++)e.dom.table==r[i].that.dom.table&&r[i].type==t&&r[i].fn(n)};TableTools.BUTTONS={csv:{sAction:"flash_save",sCharSet:"utf8",bBomInc:!1,sFileName:"*.csv",sFieldBoundary:'"',sFieldSeperator:",",sNewLine:"auto",sTitle:"",sToolTip:"",sButtonClass:"DTTT_button_csv",sButtonClassHover:"DTTT_button_csv_hover",sButtonText:"CSV",mColumns:"all",bHeader:!0,bFooter:!0,bSelectedOnly:!1,fnMouseover:null,fnMouseout:null,fnClick:function(e,t,n){this.fnSetText(n,this.fnGetTableData(t))},fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null},xls:{sAction:"flash_save",sCharSet:"utf16le",bBomInc:!0,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"	",sNewLine:"auto",sTitle:"",sToolTip:"",sButtonClass:"DTTT_button_xls",sButtonClassHover:"DTTT_button_xls_hover",sButtonText:"Excel",mColumns:"all",bHeader:!0,bFooter:!0,bSelectedOnly:!1,fnMouseover:null,fnMouseout:null,fnClick:function(e,t,n){this.fnSetText(n,this.fnGetTableData(t))},fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null},copy:{sAction:"flash_copy",sFieldBoundary:"",sFieldSeperator:"	",sNewLine:"auto",sToolTip:"",sButtonClass:"DTTT_button_copy",sButtonClassHover:"DTTT_button_copy_hover",sButtonText:"Copy",mColumns:"all",bHeader:!0,bFooter:!0,bSelectedOnly:!1,fnMouseover:null,fnMouseout:null,fnClick:function(e,t,n){this.fnSetText(n,this.fnGetTableData(t))},fnSelect:null,fnComplete:function(e,t,n,r){var i=r.split("\n").length,s=this.s.dt.nTFoot===null?i-1:i-2,o=s==1?"":"s";alert("Copied "+s+" row"+o+" to the clipboard")},fnInit:null,fnCellRender:null},pdf:{sAction:"flash_pdf",sFieldBoundary:"",sFieldSeperator:"	",sNewLine:"\n",sFileName:"*.pdf",sToolTip:"",sTitle:"",sButtonClass:"DTTT_button_pdf",sButtonClassHover:"DTTT_button_pdf_hover",sButtonText:"PDF",mColumns:"all",bHeader:!0,bFooter:!1,bSelectedOnly:!1,fnMouseover:null,fnMouseout:null,sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(e,t,n){this.fnSetText(n,"title:"+this.fnGetTitle(t)+"\n"+"message:"+t.sPdfMessage+"\n"+"colWidth:"+this.fnCalcColRatios(t)+"\n"+"orientation:"+t.sPdfOrientation+"\n"+"size:"+t.sPdfSize+"\n"+"--/TableToolsOpts--\n"+this.fnGetTableData(t))},fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null},print:{sAction:"print",sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.",sMessage:"",bShowAll:!0,sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonClassHover:"DTTT_button_print_hover",sButtonText:"Print",fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null},text:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Text button",mColumns:"all",bHeader:!0,bFooter:!0,bSelectedOnly:!1,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null},select:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Select button",mColumns:"all",bHeader:!0,bFooter:!0,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:function(t,n){this.fnGetSelected().length!==0?e(t).removeClass("DTTT_disabled"):e(t).addClass("DTTT_disabled")},fnComplete:null,fnInit:function(t,n){e(t).addClass("DTTT_disabled")},fnCellRender:null},select_single:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Select button",mColumns:"all",bHeader:!0,bFooter:!0,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:function(t,n){var r=this.fnGetSelected().length;r==1?e(t).removeClass("DTTT_disabled"):e(t).addClass("DTTT_disabled")},fnComplete:null,fnInit:function(t,n){e(t).addClass("DTTT_disabled")},fnCellRender:null},select_all:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Select all",mColumns:"all",bHeader:!0,bFooter:!0,fnMouseover:null,fnMouseout:null,fnClick:function(e,t){this.fnSelectAll()},fnSelect:function(t,n){this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()?e(t).addClass("DTTT_disabled"):e(t).removeClass("DTTT_disabled")},fnComplete:null,fnInit:null,fnCellRender:null},select_none:{sAction:"text",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Deselect all",mColumns:"all",bHeader:!0,bFooter:!0,fnMouseover:null,fnMouseout:null,fnClick:function(e,t){this.fnSelectNone()},fnSelect:function(t,n){this.fnGetSelected().length!==0?e(t).removeClass("DTTT_disabled"):e(t).addClass("DTTT_disabled")},fnComplete:null,fnInit:function(t,n){e(t).addClass("DTTT_disabled")},fnCellRender:null},ajax:{sAction:"text",sFieldBoundary:"",sFieldSeperator:"	",sNewLine:"\n",sAjaxUrl:"/xhr.php",sToolTip:"",sButtonClass:"DTTT_button_text",sButtonClassHover:"DTTT_button_text_hover",sButtonText:"Ajax button",mColumns:"all",bHeader:!0,bFooter:!0,bSelectedOnly:!1,fnMouseover:null,fnMouseout:null,fnClick:function(t,n){var r=this.fnGetTableData(n);e.ajax({url:n.sAjaxUrl,data:[{name:"tableData",value:r}],success:n.fnAjaxComplete,dataType:"json",type:"POST",cache:!1,error:function(){alert("Error detected when sending table data to server")}})},fnSelect:null,fnComplete:null,fnInit:null,fnAjaxComplete:function(e){alert("Ajax complete")},fnCellRender:null},div:{sAction:"div",sToolTip:"",sButtonClass:"DTTT_nonbutton",sButtonClassHover:"",sButtonText:"Text button",fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,nContent:null,fnCellRender:null},collection:{sAction:"collection",sToolTip:"",sButtonClass:"DTTT_button_collection",sButtonClassHover:"DTTT_button_collection_hover",sButtonText:"Collection",fnMouseover:null,fnMouseout:null,fnClick:function(e,t){this._fnCollectionShow(e,t)},fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null}};TableTools.DEFAULTS={sSwfPath:"<?php echo base_url();?>media/swf/copy_cvs_xls_pdf.swf",sRowSelect:"none",sSelectedClass:"DTTT_selected",fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"]};TableTools.prototype.CLASS="TableTools";TableTools.VERSION="2.0.2";TableTools.prototype.VERSION=TableTools.VERSION;typeof e.fn.dataTable=="function"&&typeof e.fn.dataTableExt.fnVersionCheck=="function"&&e.fn.dataTableExt.fnVersionCheck("1.8.2")?e.fn.dataTableExt.aoFeatures.push({fnInit:function(e){var t=typeof e.oInit.oTableTools!="undefined"?e.oInit.oTableTools:{},n=new TableTools(e.oInstance,t);TableTools._aInstances.push(n);return n.dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools 2 requires DataTables 1.8.2 or newer - www.datatables.net/download")})(jQuery,window,document);